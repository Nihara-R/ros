# IE4060 Assignment 2: Autonomous Navigation in Gazebo

This project is a solution for the IE4060 - Robotics and Intelligent Systems assignment at the Sri Lanka Institute of Information Technology (SLIIT).

The goal is to implement an autonomous navigation system for a TurtleBot3 Burger robot in a custom maze environment. This is achieved using ROS 2 Jazzy, Gazebo for simulation, SLAM for mapping, and the Nav2 stack for path planning and navigation .

## Project Structure

This repository contains a single ROS 2 package named `ie4060_asssignment2`.

```
ie4060_asssignment2_repo/
├── src/
│   └── ie4060_asssignment2/
│       ├── package.xml
│       ├── setup.py
│       ├── worlds/
│       │   └── maze.world        # The custom Gazebo maze 
│       ├── maps/
│       │   └── maze.yaml         # The map generated by SLAM
│       │   └── maze.pgm
│       ├── config/
│       │   └── nav2_params.yaml  # Configuration for the Nav2 stack
│       └── launch/
│           ├── tb3_maze_bringup.launch.py  # Launches Gazebo + Robot
│           ├── slam.launch.py              # Launches SLAM (slam_toolbox)
│           └── nav2.launch.py              # Launches Navigation (Nav2)
└── README.md
```

## 1. Prerequisites & Setup

Before you begin, ensure you have a working installation of **ROS 2 Jazzy** on Ubuntu 24.04.

You must also install the packages for TurtleBot3, Gazebo, SLAM, and Nav2.

```bash
# Set TurtleBot3 model (add this to your ~/.bashrc)
echo 'export TURTLEBOT3_MODEL=burger' >> ~/.bashrc
source ~/.bashrc

# Install main packages
sudo apt update
sudo apt install ros-jazzy-gazebo-* \
                 ros-jazzy-turtlebot3 \
                 ros-jazzy-turtlebot3-simulations \
                 ros-jazzy-slam-toolbox \
                 ros-jazzy-nav2-bringup
```

## 2. Build the Workspace

Clone this repository into your ROS 2 workspace's `src` folder and build it using `colcon`.

```bash
# Navigate to your ROS 2 workspace (or create one)
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src

# Clone the repository
git clone [https://github.com/YOUR_USERNAME/ie4060_asssignment2_repo.git](https://github.com/YOUR_USERNAME/ie4060_asssignment2_repo.git) .

# Go to the root of the workspace
cd ~/ros2_ws

# Build the package
colcon build --packages-select ie4060_asssignment2

# Source the workspace
source install/setup.bash
```

## 3. How to Run the Project (Usage Steps)

These steps must be run in order. Each step requires a **new terminal**. Remember to source your workspace in each new terminal: `source ~/ros2_ws/install/setup.bash`

---

### Step 1: Launch the Simulation

This command starts Gazebo and spawns the TurtleBot3 Burger in our custom `maze.world`.

```bash
# In Terminal 1
source ~/ros2_ws/install/setup.bash
ros2 launch ie4060_asssignment2 tb3_maze_bringup.launch.py
```
> **Wait** for Gazebo to fully load and for the robot to appear in the world.

---

### Step 2: Run SLAM (to Create the Map)

This command starts the `slam_toolbox` node and opens RViz. You will drive the robot around to build the map .

```bash
# In Terminal 2
source ~/ros2_ws/install/setup.bash
ros2 launch ie4060_asssignment2 slam.launch.py
```

**In a 3rd Terminal**, launch the teleoperation node to drive the robot:

```bash
# In Terminal 3
source ~/ros2_ws/install/setup.bash
ros2 run turtlebot3_teleop teleop_keyboard
```
> **Action:** Use the keyboard in **Terminal 3** to drive the robot. Watch the map build in **RViz (Terminal 2)**. Cover the entire maze, ensuring all walls are detected.

---

### Step 3: Save the Map

Once the map is complete, save it. This will create `maze.pgm` and `maze.yaml` in the `src/ie4060_asssignment2/maps/` directory.

```bash
# In Terminal 4 (or any new terminal)
source ~/ros2_ws/install/setup.bash
cd ~/ros2_ws/src/ie4060_asssignment2/maps
ros2 run nav2_map_server map_saver_cli -f maze
```
> **You can now close Terminals 2, 3, and 4.** Leave Terminal 1 (Gazebo) running.

---

### Step 4: Run Autonomous Navigation (Nav2)

This is the final step. This command launches the full Nav2 stack , loads your saved map, and localizes the robot in it.

```bash
# In Terminal 2 (new)
source ~/ros2_ws/install/setup.bash
ros2 launch ie4060_asssignment2 nav2.launch.py
```
> **Wait** for RViz to load. You will see the map, but the robot's position might be wrong.

### Step 5: Localize and Navigate

1.  **Set Initial Pose:** In RViz, click the **"2D Pose Estimate"** button. Click and drag an arrow on the map where the robot is in the Gazebo world, pointing in the correct direction. The green "pose" arrows in RViz should snap to the robot's location.

2.  **Set Navigation Goal:** In RViz, click the **"Nav2 Goal"** button . Click and drag an arrow on the map to set a destination.

The robot will now autonomously plan a path (using A*/Dijkstra) and navigate to the goal, avoiding obstacles .
